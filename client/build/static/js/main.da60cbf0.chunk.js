(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,t,a){e.exports=a(270)},114:function(e,t,a){},115:function(e,t,a){},148:function(e,t){},150:function(e,t){},167:function(e,t,a){},267:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(61),c=a.n(l),o=(a(114),a(7)),s=a(17),u=a(5),i=function(){if("undefined"!==window)return!!sessionStorage.getItem("token")&&JSON.parse(sessionStorage.getItem("token"))},m=function(){if("undefined"!==window)return!!sessionStorage.getItem("user")&&JSON.parse(sessionStorage.getItem("user"))},d=(a(115),Object(s.g)((function(e){var t=e.history;return r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item pr-3 pt-3 pb-3"},r.a.createElement(o.b,{to:"/"},"Home")),r.a.createElement("li",{className:"nav-item pr-3 pt-3 pb-3"},r.a.createElement(o.b,{to:"/create"},"Create a Blog Post")),!m()&&r.a.createElement("li",{className:"nav-item ml-auto pr-3 pt-3 pb-3"},r.a.createElement(o.b,{to:"/login"},"Login")),m()&&r.a.createElement("li",{onClick:function(){return e=function(){return t.push("/")},"undefined"!==window&&(sessionStorage.removeItem("token"),sessionStorage.removeItem("user")),void e();var e},className:"nav-item ml-auto pr-3 pt-3 pb-3",style:{cursor:"pointer"}},"Logout")))}))),p=a(4),E=a.n(p),b=a(43),f=a.n(b),g=(a(167),function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],c=function(){E.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API,"/posts")).then((function(e){l(e.data)})).catch((function(e){return alert("Error in fetching posts")}))};Object(n.useEffect)((function(){c()}),[]);var s=function(e){E.a.delete("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API,"/post/").concat(e),{headers:{authorization:"Bearer ".concat(i())}}).then((function(e){alert(e.data.message),c()})).catch((function(e){return alert("Error deleting post")}))};return r.a.createElement("div",{className:"container pb-5"},r.a.createElement(d,null),r.a.createElement("br",null),r.a.createElement("h1",{className:"title"},"ValueBlog"),r.a.createElement("h5",{className:"tagline"},"Value for your Time"),r.a.createElement("hr",null),a.map((function(e,t){return r.a.createElement("div",{className:"row",key:e._id,style:{borderBottom:"1px solid yellow"}},r.a.createElement("div",{className:"col pt-3 pb-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10"},r.a.createElement(o.b,{to:"/post/".concat(e.slug)},r.a.createElement("h2",null,e.title)),r.a.createElement("div",{className:"lead pt-3"},f()(e.content.substring(0,500))),r.a.createElement("p",null,"Author ",r.a.createElement("span",{className:"badge"},e.user)," Published on"," ",r.a.createElement("span",{className:"badge"},new Date(e.createdAt).toLocaleString()))),m()&&r.a.createElement("div",{className:"col-md-2"},r.a.createElement(o.b,{to:"/post/update/".concat(e.slug),className:"btn btn-sm btn-outline-warning"},"Update"),r.a.createElement("button",{onClick:function(){return t=e.slug,void(window.confirm("Press OK if you want to delete this post?")&&s(t));var t},className:"btn btn-sm btn-outline-danger ml-1"},"Delete")))))})))}),N=a(16),h=a(14),v=a(44),O=a.n(v),P=(a(105),a(267),{toolbar:[[{font:[]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"},{align:[]}],["link","image","video"],["clean"]]}),j=function(){var e=Object(n.useState)({title:"",user:m()}),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),o=Object(u.a)(c,2),s=o[0],p=o[1],b=a.title,f=a.user,g=function(e){return function(t){l(Object(h.a)({},a,Object(N.a)({},e,t.target.value)))}};return r.a.createElement("div",{className:"container pb-5"},r.a.createElement(d,null),r.a.createElement("br",null),r.a.createElement("h1",null,"CREATE POST"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),E.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API,"/post"),{title:b,content:s,user:f},{headers:{authorization:"Bearer ".concat(i())}}).then((function(e){console.log(e),l(Object(h.a)({},a,{title:"",user:""})),p(""),alert("".concat(e.data.title," blog post is created"))})).catch((function(e){console.log(e.response),alert(e.response.data.error)}))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Title"),r.a.createElement("input",{onChange:g("title"),value:b,type:"text",className:"form-control",placeholder:"Post title",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Content"),r.a.createElement(O.a,{modules:P,onChange:function(e){console.log(e),p(e)},value:s,theme:"snow",className:"",placeholder:"Write something..",style:{border:"1px solid yellow"}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"User"),r.a.createElement("input",{onChange:g("user"),value:f,type:"text",className:"form-control",placeholder:"Your name",required:!0})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-warning"},"Create"))))},w=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){E.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API,"/post/").concat(e.match.params.slug)).then((function(e){return c(e.data)})).catch((function(e){return alert("Error")}))}),[]);return r.a.createElement("div",{className:"container pb-5"},r.a.createElement(d,null),l&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2 pt-3 pb-2"},r.a.createElement("h1",null,l.title),r.a.createElement("div",{className:"lead pt-3"},f()(l.content)),r.a.createElement("p",null,"Author ",r.a.createElement("span",{className:"badge"},l.user)," Published on"," ",r.a.createElement("span",{className:"badge"},new Date(l.createdAt).toLocaleString())))))},C=(a(268),{toolbar:[[{font:[]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"},{align:[]}],["link","image","video"],["clean"]]}),_=function(e){var t=Object(n.useState)({title:"",slug:"",user:""}),a=Object(u.a)(t,2),l=a[0],c=a[1],o=l.title,s=l.slug,m=l.user,p=Object(n.useState)(""),b=Object(u.a)(p,2),f=b[0],g=b[1],v=function(e){console.log(e),g(e)};Object(n.useEffect)((function(){E.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API,"/post/").concat(e.match.params.slug)).then((function(e){var t=e.data,a=t.title,n=t.content,r=t.slug,o=t.user;c(Object(h.a)({},l,{title:a,slug:r,user:o})),g(n)})).catch((function(e){return alert("Error loading single post")}))}),[]);var P=function(e){return function(t){c(Object(h.a)({},l,Object(N.a)({},e,t.target.value)))}},j=function(e){e.preventDefault(),E.a.put("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API,"/post/").concat(s),{title:o,content:f,user:m},{headers:{authorization:"Bearer ".concat(i())}}).then((function(e){console.log(e);var t=e.data,a=t.title,n=t.content,r=t.slug,o=t.user;c(Object(h.a)({},l,{title:a,content:n,slug:r,user:o})),alert("".concat(a," blog post is updated"))})).catch((function(e){console.log(e.response),alert(e.response.data.error)}))};return r.a.createElement("div",{className:"container pb-5"},r.a.createElement(d,null),r.a.createElement("br",null),r.a.createElement("h1",null,"UPDATE POST"),r.a.createElement("form",{onSubmit:j},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Title"),r.a.createElement("input",{onChange:P("title"),value:o,type:"text",className:"form-control",placeholder:"Post title",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Content"),r.a.createElement(O.a,{modules:C,onChange:v,value:f,theme:"snow",className:"",placeholder:"Write something..",style:{border:"1px solid silver"}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"User"),r.a.createElement("input",{onChange:P("user"),value:m,type:"text",className:"form-control",placeholder:"Your name",required:!0})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-warning"},"Update"))))},A=(a(269),Object(s.g)((function(e){var t=Object(n.useState)({name:"",password:""}),a=Object(u.a)(t,2),l=a[0],c=a[1],o=l.name,s=l.password;Object(n.useEffect)((function(){m()&&e.history.push("/")}),[]);var i=function(e){return function(t){c(Object(h.a)({},l,Object(N.a)({},e,t.target.value)))}};return r.a.createElement("div",{className:"container pb-5"},r.a.createElement(d,null),r.a.createElement("br",null),r.a.createElement("h1",null,"LOGIN"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.table({name:o,password:s}),E.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API,"/login"),{name:o,password:s}).then((function(t){console.log(t),function(e,t){"undefined"!==window&&(sessionStorage.setItem("token",JSON.stringify(e.data.token)),sessionStorage.setItem("user",JSON.stringify(e.data.name))),t()}(t,(function(){return e.history.push("/create")}))})).catch((function(e){console.log(e.response),alert(e.response.data.error)}))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:i("name"),value:o,type:"text",className:"form-control",placeholder:"Your Name",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:i("password"),value:s,type:"password",className:"form-control",placeholder:"Your Password",required:!0})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-warning"},"Login"))))}))),S=a(108),I=function(e){var t=e.component,a=Object(S.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return m()?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},x=function(){return r.a.createElement(o.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:g}),r.a.createElement(I,{path:"/create",exact:!0,component:j}),r.a.createElement(s.b,{path:"/login",exact:!0,component:A}),r.a.createElement(s.b,{path:"/post/:slug",exact:!0,component:w}),r.a.createElement(I,{path:"/post/update/:slug",exact:!0,component:_})))};c.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[109,1,2]]]);
//# sourceMappingURL=main.da60cbf0.chunk.js.map